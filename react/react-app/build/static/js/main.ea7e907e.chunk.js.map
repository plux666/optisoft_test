{"version":3,"sources":["components/drop-box.js","components/comment.js","components/user-row.js","components/list-main.js","App.js","index.js"],"names":["DropBox","props","useState","done","setDone","onDrop","e","preventDefault","file","dataTransfer","items","getAsFile","fileName","name","text","then","res","error","className","id","onDragOver","Comment","pClass","user","comment","replies","map","v","i","key","mapReplies","UserRow","show","toggleShow","onClick","stopPropagation","delete","MainList","users","sort","App","deleteUser","userName","state","Array","from","index","findIndex","splice","setState","stage","fileHandler","bind","dropBoxRef","React","createRef","findIn","a","repl","includes","push","data","JSON","parse","this","console","ref","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ea7e907e.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\n\r\nexport default function DropBox(props) {\r\n\r\n\tconst [done, setDone] = useState(false);\r\n\r\n\tfunction onDrop(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tlet file = e.dataTransfer.items[0].getAsFile();\r\n\t\tlet fileName = file.name;\r\n\r\n\t\tfile.text().then(res => {setDone(true); props.file(res, fileName);})\r\n\t}\r\n\r\n\tif (!done) {\r\n\t\treturn(\r\n\t\t\t<div className='drop-box-container'\r\n\t\t\t\tid='drop-zone'\r\n\t\t\t\tonDrop={onDrop}\r\n\t\t\t\tonDragOver={(e) => {e.preventDefault()}}>\r\n\t\t\t\t<h2>DROP FILE HERE</h2>\r\n\t\t\t</div>\r\n\t\t)\r\n\t} else if (props.error) {\r\n\t\treturn(\r\n\t\t\t<div className='drop-box-container'\r\n\t\t\t\tid='drop-zone'\r\n\t\t\t\tonDrop={onDrop}\r\n\t\t\t\tonDragOver={(e) => {e.preventDefault()}}>\r\n\t\t\t\t<h2>{\"COULDN'T PROCESS FILE \\n DROP AGAIN\"}</h2>\r\n\t\t\t</div>\r\n\t\t)\r\n\t} else if (done) {\r\n\t\treturn(\r\n\t\t\t<div className='drop-box-container'\r\n\t\t\t\tid='drop-zone'>\r\n\t\t\t\t<h2>PROCESSING...</h2>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react';\r\n\r\n\r\nexport default function Comment(props) {\r\n\r\n  function mapReplies() {\r\n    if (props.comment.replies) {\r\n      return props.comment.replies.map((v, i) => {\r\n        return(\r\n          <Comment\r\n            key={i}\r\n            user={v.user}\r\n            comment={{comment: v.comment, replies: v.replies}}>\r\n          </Comment>\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  // if user is not provided, comment considered as root comment\r\n  let pClass = props.user ? '' : 'root'\r\n  return(\r\n    <div className={'comment'}>\r\n      <h4>{props.user}</h4>\r\n      <p className={pClass}>{props.comment.comment}</p>\r\n      {mapReplies()}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport Comment from './comment.js'\r\n\r\n\r\nexport default function UserRow(props) {\r\n\r\n\tconst [show, toggleShow] = useState(false);\r\n\r\n\tfunction mapComments() {\r\n    return props.comment.map((v, i) => {\r\n      return (\r\n\t\t\t\t<Comment\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tdelete={props.delete}\r\n\t\t\t\t\tcomment={{comment: v.comment, replies: v.replies}}>\r\n\t\t\t\t</Comment>\r\n\t\t\t)\r\n    })\r\n  }\r\n\r\n\tif (!show) {\r\n\t\treturn(\r\n\t\t\t<div className='use-row-small'>\r\n\t\t\t\t<i onClick={(e) => {e.stopPropagation(); props.delete(props.user)}}\r\n\t\t\t\t\tclassName=\"material-icons delete-icon\">delete</i>\r\n\t\t\t\t<h3>{props.user}</h3>\r\n\t\t\t</div>\r\n\t\t)\r\n\t} else if (show) {\r\n\t\treturn(\r\n\t\t\t<div className={'use-row-open'}>\r\n\t\t\t\t<i onClick={(e) => {e.stopPropagation(); props.delete(props.user)}}\r\n\t\t\t\t\t className=\"material-icons delete-icon\">delete</i>\r\n\t\t\t\t<h3 onClick={() => {toggleShow(false)}}>{props.user}</h3>\r\n\t\t\t\t{mapComments()}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport UserRow from './user-row.js'\r\n\r\n\r\nexport default function MainList(props) {\r\n\r\n\tfunction mapUsers() {\r\n\t\tlet names = props.users.sort();\r\n\t\treturn names.map(name => {\r\n\t\t\treturn(\r\n\t\t\t\t<UserRow\r\n\t\t\t\t\tkey={name}\r\n\t\t\t\t\tdelete={props.delete}\r\n\t\t\t\t\tuser={name}\r\n\t\t\t\t\tcomment={props.users[name]}/>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div className='list'>\r\n\t\t\t{mapUsers()}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react';\nimport DropBox from './components/drop-box.js';\nimport MainList from \"./components/list-main\";\n\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      stage: 1,\n      error: false\n    }\n    this.fileHandler = this.fileHandler.bind(this)\n    this.dropBoxRef = React.createRef()\n  }\n\n  async fileHandler(file, fileName) {\n    let data;\n    let users = [];\n\n    async function findIn(comment) {\n      if (comment.replies) {\n        for (let repl of comment.replies) {\n          if (!users.includes(repl.user)) {\n            users.push(repl.user)\n          }\n          if (repl.replies) {\n            await findIn(repl)\n          }\n        }\n      }\n    }\n\n    try {\n      data = JSON.parse(file)\n      users.push(data.user)\n\n      for (let v of data.replies) {\n        if (!users.includes(v.user)) {\n          users.push(v.user)\n        }\n        await findIn(v)\n      }\n\n      this.setState({\n        stage: 2,\n        fileName: fileName,\n        users: users,\n        error: false\n      })\n\n    } catch(e) {\n      console.error(e)\n      this.setState({error: true})\n    }\n  }\n\n  deleteUser = (userName) => {\n    let state = Array.from(this.state.users);\n\n    let index = state.findIndex(v => {\n      if (v === userName) {\n        return true\n      } else {\n        return false\n      }\n    })\n\n    state.splice(index, 1)\n    this.setState({users: state})\n  }\n\n  render() {\n    if (this.state.stage === 1) {\n      return (\n        <div className=\"app\">\n          <div className='container-main'>\n            <DropBox error={this.state.error}\n              ref={this.dropBoxRef}\n              file={this.fileHandler}/>\n          </div>\n        </div>\n      );\n    } else if (this.state.stage === 2) {\n      return(\n          <div className=\"app\">\n            <div className='container-main'>\n              <h2>{this.state.fileName}</h2>\n              <MainList\n                delete={this.deleteUser}\n                users={this.state.users}/>\n            </div>\n          </div>\n      )\n    }\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}